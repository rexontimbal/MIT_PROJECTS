{% extends 'admin_panel/base.html' %}

{% block title %}Create New User{% endblock %}

{% block content %}
<!-- Page Header -->
<div class="admin-page-header">
    <div>
        <h1 class="admin-page-title">
            <i class="fas fa-user-plus"></i>
            Create New User
        </h1>
        <div class="admin-breadcrumb">
            <a href="{% url 'admin_panel:dashboard' %}"><i class="fas fa-tachometer-alt"></i> Admin</a>
            <span>/</span>
            <a href="{% url 'admin_panel:users' %}">Users</a>
            <span>/</span>
            <span>Create</span>
        </div>
    </div>
    <a href="{% url 'admin_panel:users' %}" class="btn btn-outline">
        <i class="fas fa-arrow-left"></i>
        Back to Users
    </a>
</div>

<!-- Messages -->
{% if messages %}
    {% for message in messages %}
    <div class="alert alert-{{ message.tags }}">
        <i class="fas fa-info-circle"></i>
        {{ message }}
    </div>
    {% endfor %}
{% endif %}

<div style="max-width: 900px; margin: 0 auto;">
    <form method="post">
        {% csrf_token %}

        <!-- Account Details -->
        <div class="admin-card">
            <div class="admin-card-header">
                <h2 class="admin-card-title">
                    <i class="fas fa-user"></i>
                    Account Details
                </h2>
            </div>

            <div class="form-group">
                <label class="form-label" for="username">Username <span style="color: var(--accent-red);">*</span></label>
                <input type="text" name="username" id="username" class="form-control" required>
                <small style="color: var(--text-light);">Must be unique. Letters, digits, and @/./+/-/_ only.</small>
            </div>

            <div class="form-group">
                <label class="form-label" for="password">Password <span style="color: var(--accent-red);">*</span></label>
                <input type="password" name="password" id="password" class="form-control" required minlength="8">
                <small style="color: var(--text-light);">At least 8 characters. User will be required to change on first login.</small>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                <div class="form-group">
                    <label class="form-label" for="first_name">First Name <span style="color: var(--accent-red);">*</span></label>
                    <input type="text" name="first_name" id="first_name" class="form-control" required>
                </div>

                <div class="form-group">
                    <label class="form-label" for="last_name">Last Name <span style="color: var(--accent-red);">*</span></label>
                    <input type="text" name="last_name" id="last_name" class="form-control" required>
                </div>
            </div>

            <div class="form-group">
                <label class="form-label" for="email">Email Address</label>
                <input type="email" name="email" id="email" class="form-control">
            </div>
        </div>

        <!-- PNP Profile -->
        <div class="admin-card">
            <div class="admin-card-header">
                <h2 class="admin-card-title">
                    <i class="fas fa-shield-alt"></i>
                    PNP Profile
                </h2>
            </div>

            <div class="form-group">
                <label class="form-label" for="badge_number">Badge Number <span style="color: var(--accent-red);">*</span></label>
                <input type="text" name="badge_number" id="badge_number" class="form-control" required>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                <div class="form-group">
                    <label class="form-label" for="rank">Rank <span style="color: var(--accent-red);">*</span></label>
                    <select name="rank" id="rank" class="form-control" required>
                        {% for value, label in ranks %}
                        <option value="{{ value }}">{{ label }}</option>
                        {% endfor %}
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label" for="role">Role <span style="color: var(--accent-red);">*</span></label>
                    <select name="role" id="role" class="form-control" required>
                        {% for value, label in roles %}
                        <option value="{{ value }}">{{ label }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                <div class="form-group">
                    <label class="form-label" for="region">Region</label>
                    <input type="text" name="region" id="region" class="form-control" value="Caraga">
                </div>

                <div class="form-group">
                    <label class="form-label" for="province">Province</label>
                    <input type="text" name="province" id="province" class="form-control">
                </div>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                <div class="form-group">
                    <label class="form-label" for="station">Station</label>
                    <input type="text" name="station" id="station" class="form-control">
                </div>

                <div class="form-group">
                    <label class="form-label" for="unit">Unit</label>
                    <input type="text" name="unit" id="unit" class="form-control">
                </div>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                <div class="form-group">
                    <label class="form-label" for="mobile_number">Mobile Number</label>
                    <input type="text" name="mobile_number" id="mobile_number" class="form-control" placeholder="+63">
                </div>

                <div class="form-group">
                    <label class="form-label" for="phone_number">Phone Number</label>
                    <input type="text" name="phone_number" id="phone_number" class="form-control">
                </div>
            </div>
        </div>

        <!-- Permissions -->
        <div class="admin-card">
            <div class="admin-card-header">
                <h2 class="admin-card-title">
                    <i class="fas fa-lock"></i>
                    Permissions
                </h2>
            </div>

            <div style="display: flex; flex-direction: column; gap: 1rem;">
                <label style="display: flex; align-items: center; gap: 0.75rem; cursor: pointer;">
                    <input type="checkbox" name="is_staff" style="width: 20px; height: 20px;">
                    <div>
                        <strong style="color: var(--text-dark);">Staff Status</strong>
                        <br>
                        <small style="color: var(--text-light);">User can access admin panel</small>
                    </div>
                </label>

                <label style="display: flex; align-items: center; gap: 0.75rem; cursor: pointer;">
                    <input type="checkbox" name="is_superuser" style="width: 20px; height: 20px;">
                    <div>
                        <strong style="color: var(--text-dark);">Superuser Status</strong>
                        <br>
                        <small style="color: var(--text-light);">Full system access - use with extreme caution!</small>
                    </div>
                </label>
            </div>
        </div>

        <!-- Submit Buttons -->
        <div style="display: flex; gap: 1rem; justify-content: flex-end;">
            <a href="{% url 'admin_panel:users' %}" class="btn btn-secondary">
                <i class="fas fa-times"></i>
                Cancel
            </a>
            <button type="submit" class="btn btn-success">
                <i class="fas fa-user-plus"></i>
                Create User
            </button>
        </div>
    </form>
</div>

{% endblock %}
